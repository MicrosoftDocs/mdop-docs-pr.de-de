---
title: So konfigurieren Sie einen schreibgeschützten Cache für App-V Client (VDI)
description: So konfigurieren Sie einen schreibgeschützten Cache für App-V Client (VDI)
author: dansimp
ms.assetid: 7a41e017-9e23-4a6a-a659-04d23f008b83
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 114f9dfbf55a3f62b6bc8bec6b37a659ffbfaf56
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/26/2020
ms.locfileid: "10807308"
---
# <span data-ttu-id="b1b5b-103">So konfigurieren Sie einen schreibgeschützten Cache für App-V Client (VDI)</span><span class="sxs-lookup"><span data-stu-id="b1b5b-103">How to Configure a Read-only Cache on the App-V Client (VDI)</span></span>


<span data-ttu-id="b1b5b-104">In Microsoft Application Virtualization (App-V) 4,6 unterstützt der Client die Verwendung eines freigegebenen schreibgeschützten Caches.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-104">In Microsoft Application Virtualization (App-V) 4.6 the Client supports using a shared read-only cache.</span></span> <span data-ttu-id="b1b5b-105">Durch den freigegebenen schreibgeschützten Cache kann der Client speicherplatzeffizient in einem VDI-System (Virtual Desktop Infrastructure) verwenden, in dem Benutzer Anwendungen auf virtuellen Computern (VM) ausführen, die in einer Rechenzentrum-Server Umgebung gehostet werden, und den Netzwerkspeicher in einem SAN (Storage Area Network) freigeben.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-105">The shared read-only cache enables the Client to use disk space efficiently in a Virtual Desktop Infrastructure (VDI) system, where users run applications on Virtual Machines (VM) that are hosted in a data center server environment and share network storage on a Storage Area Network (SAN).</span></span> <span data-ttu-id="b1b5b-106">Die folgenden Verfahren bieten eine Übersicht über den Prozess, der erforderlich ist, um den App-V-Client in einer der primären VDI-Architekturen zu implementieren, der so genannten "Pooled VM" oder "static VM".</span><span class="sxs-lookup"><span data-stu-id="b1b5b-106">The following procedures provide an overview of the process that is required to implement the App-V Client in either of the primary VDI architectures, known as “Pooled VM” or “Static VM”.</span></span> <span data-ttu-id="b1b5b-107">Es wird davon ausgegangen, dass Sie mit der Planung, Bereitstellung und dem Betrieb des App-V-Systems und seiner Komponenten und auch mit dem Betrieb und der Verwaltung des VDI-Servers vertraut sind.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-107">It is assumed that you are familiar with the planning, deployment, and operation of the App-V system and its components, and also the operation and management of the VDI server.</span></span> <span data-ttu-id="b1b5b-108">Weitere Informationen zu App-V finden Sie unter [Application Virtualization](https://go.microsoft.com/fwlink/?LinkId=122939) (https://go.microsoft.com/fwlink/?LinkId=122939)</span><span class="sxs-lookup"><span data-stu-id="b1b5b-108">For more information about App-V, see [Application Virtualization](https://go.microsoft.com/fwlink/?LinkId=122939) (https://go.microsoft.com/fwlink/?LinkId=122939)</span></span>

<span data-ttu-id="b1b5b-109">**Hinweis**  Die in diesen Verfahren beschriebenen Details sind nur als Beispiele vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-109">**Note** The details outlined in these procedures are intended as examples only.</span></span> <span data-ttu-id="b1b5b-110">Sie können verschiedene Methoden verwenden, um den gesamten Prozess abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-110">You might use different methods to complete the overall process.</span></span>

 

## <span data-ttu-id="b1b5b-111">Bereitstellen des App-V-Clients in einem VDI-Szenario</span><span class="sxs-lookup"><span data-stu-id="b1b5b-111">Deploying the App-V Client in a VDI Scenario</span></span>


<span data-ttu-id="b1b5b-112">Sie können den App-V-Client in einem VDI-Szenario mithilfe eines freigegebenen schreibgeschützten Caches bereitstellen, der mit allen Anwendungen aufgefüllt wurde, die für alle Benutzer erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-112">You can deploy the App-V Client in a VDI scenario by using a shared read-only cache that has been populated with all the applications required for all users.</span></span> <span data-ttu-id="b1b5b-113">Anschließend konfigurieren Sie das VM-Abbild des VDI-Masters so, dass alle App-V-Clients dieselbe Cachedatei verwenden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-113">You then configure the VDI Master VM Image so that all the App-V Clients use the same cache file.</span></span> <span data-ttu-id="b1b5b-114">Benutzern wird mithilfe des App-V-Veröffentlichungsprozesses der Zugriff auf bestimmte Anwendungen gewährt.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-114">Users are granted access to specific applications by using the App-V publishing process.</span></span> <span data-ttu-id="b1b5b-115">Da der Cache bereits mit allen Anwendungen vorinstalliert ist, erfolgt kein Streaming, wenn ein Benutzer eine Anwendung startet.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-115">Since the cache is already preloaded with all applications, no streaming occurs when a user starts an application.</span></span> <span data-ttu-id="b1b5b-116">Die Pakete, die zum Vorfüllen des Caches verwendet werden, müssen jedoch auf einem App-v-Server abgelegt werden, der RTSP-Streaming (Real Time Streaming Protocol) unterstützt und den App-v-Clients Zugriffsberechtigungen gewährt.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-116">However, the packages used to prepopulate the cache must be put on an App-V server that supports Real Time Streaming Protocol (RTSP) streaming and that grants access permissions to the App-V Clients.</span></span> <span data-ttu-id="b1b5b-117">Wenn Sie die Anwendungen mithilfe eines App-V-Verwaltungsservers veröffentlichen, können Sie diese Funktion zum Bereitstellen dieser Streamingfunktion verwenden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-117">If you publish the applications by using an App-V Management Server, you can use it to provide this streaming function.</span></span>

<span data-ttu-id="b1b5b-118">Der Bereitstellungsprozess besteht aus vier Hauptaufgaben:</span><span class="sxs-lookup"><span data-stu-id="b1b5b-118">The deployment process consists of four primary tasks:</span></span>

-   <span data-ttu-id="b1b5b-119">Erstellen und Auffüllen der freigegebenen mastercachedatei</span><span class="sxs-lookup"><span data-stu-id="b1b5b-119">Creating and populating the master shared cache file</span></span>

-   <span data-ttu-id="b1b5b-120">Kopieren der freigegebenen Cachedatei in den VDI-Server Speicher</span><span class="sxs-lookup"><span data-stu-id="b1b5b-120">Copying the shared cache file to the VDI server storage</span></span>

-   <span data-ttu-id="b1b5b-121">Konfigurieren der App-V-Client Software auf dem VDI-Master Bild</span><span class="sxs-lookup"><span data-stu-id="b1b5b-121">Configuring the App-V client software on the VDI Master Image</span></span>

-   <span data-ttu-id="b1b5b-122">Verwalten des Update Bereitstellungszyklus für die freigegebene Cachedatei nach der ersten Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="b1b5b-122">Managing the update deployment cycle for the shared cache file after the initial deployment</span></span>

<span data-ttu-id="b1b5b-123">Für diese Aufgaben ist eine sorgfältige Planung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-123">These tasks require careful planning.</span></span> <span data-ttu-id="b1b5b-124">Wir empfehlen, dass Sie einen methodischen, reproduzierbaren Prozess vorbereiten und dokumentieren, dem Ihre Organisation folgen kann.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-124">We recommend that you prepare and document a methodical, reproducible process for your organization to follow.</span></span> <span data-ttu-id="b1b5b-125">Dies ist besonders wichtig für die anfängliche Vorbereitung und Bereitstellung der freigegebenen mastercachedatei sowie für die ständige Verwaltung von Anwendungsupdates, für die jeweils eine Aktualisierung des freigegebenen Master Caches erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-125">This is especially important for the initial preparation and deployment of the master shared cache file, and for the on-going management of application updates, each of which require an update to the master shared cache.</span></span> <span data-ttu-id="b1b5b-126">Führen Sie die folgenden Verfahren aus, um diese primären Aufgaben auszuführen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-126">Use the following procedures to complete these primary tasks.</span></span>

<span data-ttu-id="b1b5b-127">**Hinweis**  Obwohl Sie die Anwendungen mithilfe verschiedener Methoden veröffentlichen können, basieren die folgenden Verfahren auf der Verwendung eines App-V-Verwaltungsservers für die Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-127">**Note** Although you can publish the applications by using several different methods, the following procedures are based on the use of an App-V Management Server for publishing.</span></span>

 

**<span data-ttu-id="b1b5b-128">So konfigurieren Sie den schreibgeschützten Cache für die Erstbereitstellung in einem Pool-VM-VDI oder einem statischen VM-VDI-Szenario</span><span class="sxs-lookup"><span data-stu-id="b1b5b-128">To configure the read-only cache for initial deployment in a Pooled VM VDI or Static VM VDI scenario</span></span>**

1. <span data-ttu-id="b1b5b-129">Richten Sie einen App-V-Verwaltungs Server auf einem virtuellen Computer auf dem VDI-Server ein, und konfigurieren Sie ihn, um die Benutzerauthentifizierung und die Veröffentlichung zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-129">Set up and configure an App-V Management Server in a VM on the VDI server to provide user authentication and publishing support.</span></span>

2. <span data-ttu-id="b1b5b-130">Füllen Sie den Inhaltsordner dieses Verwaltungsservers mit allen Anwendungspaketen, die für alle Benutzer erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-130">Populate the Content folder of this Management Server with all the application packages required for all users.</span></span>

3. <span data-ttu-id="b1b5b-131">Richten Sie einen Bereitstellungscomputer ein, auf dem der App-V-Client installiert ist.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-131">Set up a staging computer that has the App-V Client installed.</span></span> <span data-ttu-id="b1b5b-132">Melden Sie sich bei dem Stagingcomputer mit einem Konto an, das Zugriff auf alle Anwendungen hat, damit der vollständige Satz der Anwendungen auf dem Computer veröffentlicht wird, und Streamen Sie die Anwendungen dann in den Zwischenspeicher, damit Sie vollständig geladen werden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-132">Log on to the staging computer with an account that has access to all applications so that the complete set of applications are published to the computer, and then stream the applications to cache so that they are fully loaded.</span></span>

   **<span data-ttu-id="b1b5b-133">Wichtig</span><span class="sxs-lookup"><span data-stu-id="b1b5b-133">Important</span></span>**  
   <span data-ttu-id="b1b5b-134">Der Bereitstellungscomputer muss denselben Betriebssystemtyp und dieselbe Systemarchitektur wie die von den VMS verwenden, auf denen der App-V-Client ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-134">The staging computer must use the same operating system type and system architecture as those used by the VMs on which the App-V Client will run.</span></span>

     

4. <span data-ttu-id="b1b5b-135">Starten Sie den Bereitstellungscomputer im abgesicherten Modus neu, um sicherzustellen, dass die Treiber nicht gestartet werden, wodurch die Cachedatei gesperrt wird.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-135">Restart the staging computer in Safe Mode to ensure the drivers are not started, which would lock the cache file.</span></span>

   **<span data-ttu-id="b1b5b-136">Hinweis:</span><span class="sxs-lookup"><span data-stu-id="b1b5b-136">Note</span></span>**  
   <span data-ttu-id="b1b5b-137">Alternativ können Sie den Application Virtualization Service beenden und deaktivieren und dann den Computer neu starten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-137">Alternatively, you can stop and disable the Application Virtualization service, and then restart the computer.</span></span> <span data-ttu-id="b1b5b-138">Nachdem die Datei kopiert wurde, denken Sie daran, den Dienst erneut zu aktivieren und zu starten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-138">After the file has been copied, remember to enable and start the service again.</span></span>

     

5. <span data-ttu-id="b1b5b-139">Kopieren Sie die sftfs. FSD-Cachedatei in das San des VDI-Servers, in dem alle VMs darauf zugreifen können, beispielsweise in einem freigegebenen Ordner.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-139">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="b1b5b-140">Legen Sie die Berechtigungen für den Ordner Zugriff für die Gruppe Jeder und für Administratoren, die die Cachedatei Updates verwalten, auf schreibgeschützt.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-140">Set the folder access permissions to Read-only for the group Everyone and to Full Control for administrators who will manage the cache file updates.</span></span> <span data-ttu-id="b1b5b-141">Der Speicherort der Cachedatei kann über die Registrierungs-AppFS\\FileName. abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-141">The location of the cache file can be obtained from the registry AppFS\\FileName.</span></span>

   **<span data-ttu-id="b1b5b-142">Wichtig</span><span class="sxs-lookup"><span data-stu-id="b1b5b-142">Important</span></span>**  
   <span data-ttu-id="b1b5b-143">Sie müssen die FSD-Datei an einem Speicherort ablegen, der die Reaktionsfähigkeit und Zuverlässigkeit hat, die der Leistung lokal angeschlossener Speicher entspricht, beispielsweise einem San.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-143">You must put the FSD file in a location that has the responsiveness and reliability equivalent to locally attached storage performance, for example, a SAN.</span></span>

     

6. <span data-ttu-id="b1b5b-144">Installieren Sie den App-V-Desktop Client auf dem VDI-Master-VM-Abbild, und konfigurieren Sie ihn für die Verwendung des schreibgeschützten Caches, indem Sie die folgenden Registrierungsschlüsselwerte zum AppFS-Schlüssel auf dem Client hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-144">Install the App-V Desktop Client on the VDI Master VM Image, and then configure it to use the read-only cache by adding the following registry key values to the AppFS key on the client.</span></span> <span data-ttu-id="b1b5b-145">Der AppFS-Schlüssel befindet sich unter HKEY \ _LOCAL \ _MACHINE \\software\\\ [Wow6432Node\\\] Microsoft\\SoftGrid\\4.5\\Client\\AppFS.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-145">The AppFS key is located at HKEY\_LOCAL\_MACHINE\\SOFTWARE\\\[Wow6432Node\\\]Microsoft\\SoftGrid\\4.5\\Client\\AppFS.</span></span>

   <table>
   <colgroup>
   <col width="25%" />
   <col width="25%" />
   <col width="25%" />
   <col width="25%" />
   </colgroup>
   <thead>
   <tr class="header">
   <th align="left"><span data-ttu-id="b1b5b-146">Key</span><span class="sxs-lookup"><span data-stu-id="b1b5b-146">Key</span></span></th>
   <th align="left"><span data-ttu-id="b1b5b-147">Typ</span><span class="sxs-lookup"><span data-stu-id="b1b5b-147">Type</span></span></th>
   <th align="left"><span data-ttu-id="b1b5b-148">Wert</span><span class="sxs-lookup"><span data-stu-id="b1b5b-148">Value</span></span></th>
   <th align="left"><span data-ttu-id="b1b5b-149">Zweck</span><span class="sxs-lookup"><span data-stu-id="b1b5b-149">Purpose</span></span></th>
   </tr>
   </thead>
   <tbody>
   <tr class="odd">
   <td align="left"><p><span data-ttu-id="b1b5b-150">FileName</span><span class="sxs-lookup"><span data-stu-id="b1b5b-150">FileName</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-151">Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="b1b5b-151">String</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-152">Pfad zu FSD</span><span class="sxs-lookup"><span data-stu-id="b1b5b-152">path to FSD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-153">Gibt den Pfad zur freigegebenen Cachedatei an, beispielsweise \VDIServername\Sharefolder\SFTFS. FSD (erforderlich).</span><span class="sxs-lookup"><span data-stu-id="b1b5b-153">Specifies the path to the shared cache file, for example, \VDIServername\Sharefolder\SFTFS.FSD (Required).</span></span></p></td>
   </tr>
   <tr class="even">
   <td align="left"><p><span data-ttu-id="b1b5b-154">ReadOnlyFSD</span><span class="sxs-lookup"><span data-stu-id="b1b5b-154">ReadOnlyFSD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-155">DWORD</span><span class="sxs-lookup"><span data-stu-id="b1b5b-155">DWORD</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-156">1</span><span class="sxs-lookup"><span data-stu-id="b1b5b-156">1</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-157">Konfiguriert den Client so, dass er im schreibgeschützten Modus ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-157">Configures the client to operate in Read-Only mode.</span></span> <span data-ttu-id="b1b5b-158">Dadurch wird sichergestellt, dass der Client nicht versucht, Aktualisierungen an den Paketcache zu streamen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-158">This ensures that the client will not attempt to stream updates to the package cache.</span></span> <span data-ttu-id="b1b5b-159">(Erforderlich)</span><span class="sxs-lookup"><span data-stu-id="b1b5b-159">(Required)</span></span></p></td>
   </tr>
   <tr class="odd">
   <td align="left"><p><span data-ttu-id="b1b5b-160">ErrorLogLocation</span><span class="sxs-lookup"><span data-stu-id="b1b5b-160">ErrorLogLocation</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-161">Zeichenfolge</span><span class="sxs-lookup"><span data-stu-id="b1b5b-161">String</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-162">Pfad zur Fehlerprotokolldatei (ETL)</span><span class="sxs-lookup"><span data-stu-id="b1b5b-162">path to error log (.etl) file</span></span></p></td>
   <td align="left"><p><span data-ttu-id="b1b5b-163">Eintrag, der zum Angeben des Pfads zum Fehlerprotokoll verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-163">Entry used to specify the path to the error log.</span></span> <span data-ttu-id="b1b5b-164">Empfohlen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-164">(Recommended.</span></span> <span data-ttu-id="b1b5b-165">Verwenden Sie einen lokalen Pfad wie C:\Logs\Sftfs.ETL).</span><span class="sxs-lookup"><span data-stu-id="b1b5b-165">Use a local path such as C:\Logs\Sftfs.etl).</span></span></p></td>
   </tr>
   </tbody>
   </table>

     

7. <span data-ttu-id="b1b5b-166">Konfigurieren Sie den Master-VM-Bild Client so, dass er den Veröffentlichungsserver verwendet und bei der Anmeldung die Veröffentlichungsaktualisierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-166">Configure the Master VM Image client to use the publishing server and to use publishing refresh at logon.</span></span> <span data-ttu-id="b1b5b-167">Wenn sich Benutzer beim VDI-System anmelden und deren VM aus dem Master-VM-Abbild erstellt wird, erfolgt ein Veröffentlichungs Aktualisierungszyklus, in dem alle Anwendungen veröffentlicht werden, für die Ihr Konto autorisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-167">As users log on to the VDI system and their VM is built from the Master VM Image, a publishing refresh cycle occurs and publishes all the applications for which their account is authorized.</span></span> <span data-ttu-id="b1b5b-168">Diese Anwendungen werden im freigegebenen Cache ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-168">These applications are run from the shared cache.</span></span>

**<span data-ttu-id="b1b5b-169">So konfigurieren Sie den Client für die Paketaktualisierung in einem Szenario mit Pool-VM</span><span class="sxs-lookup"><span data-stu-id="b1b5b-169">To configure the client for package upgrade in a Pooled VM scenario</span></span>**

1.  <span data-ttu-id="b1b5b-170">Führen Sie das Upgrade und Testen des Anwendungspakets durch.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-170">Complete the upgrade and testing of the application package.</span></span>

2.  <span data-ttu-id="b1b5b-171">Aktualisieren Sie das Paket auf dem App-V-Server.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-171">Upgrade the package on the App-V server.</span></span> <span data-ttu-id="b1b5b-172">Veröffentlichen und Streamen Sie dann die neue Version der Anwendungen auf dem Bereitstellungscomputer auf dem Client, damit Sie vollständig in den Cache geladen werden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-172">Then, publish and stream the new version of the applications to the client on the staging computer so that they are fully loaded into cache.</span></span>

3.  <span data-ttu-id="b1b5b-173">Starten Sie den Bereitstellungscomputer im abgesicherten Modus neu, um sicherzustellen, dass die Treiber nicht gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-173">Restart the staging computer in Safe Mode to ensure the drivers are not started.</span></span>

    <span data-ttu-id="b1b5b-174">**Hinweis**  Alternativ können Sie den Application Virtualization Service im Services. msc beenden und deaktivieren und dann den Computer neu starten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-174">**Note** Alternatively, you can stop and disable the Application Virtualization service in the Services.msc, and then restart the computer.</span></span> <span data-ttu-id="b1b5b-175">Nachdem die Datei kopiert wurde, denken Sie daran, den Dienst erneut zu aktivieren und zu starten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-175">After the file has been copied, remember to enable and start the service again.</span></span>

     

4.  <span data-ttu-id="b1b5b-176">Kopieren Sie die sftfs. FSD-Cachedatei in das San des VDI-Servers, in dem alle VMs darauf zugreifen können, beispielsweise in einem freigegebenen Ordner.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-176">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="b1b5b-177">Sie können einen anderen Dateinamen verwenden, beispielsweise SFTFS \ _V2. FSD, um die neue Version zu unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-177">You can use a different filename, for example, SFTFS\_V2.FSD, to distinguish the new version.</span></span>

5.  <span data-ttu-id="b1b5b-178">Zum Konfigurieren des App-V-Desktop Clients auf dem VDI-Master-VM-Bild, um die aktualisierte freigegebene Cachedatei zu verwenden, ändern Sie den FileName-Wert des AppFS-Registrierungsschlüssels so, dass er auf den Speicherort der aktualisierten Datei verweist, beispielsweise \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-178">To configure the App-V Desktop Client on the VDI Master VM Image to use the updated shared cache file, change the AppFS registry key FILENAME value to point to the location of the updated file, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="b1b5b-179">Wenn Benutzer sich abmelden und sich dann erneut anmelden, wird mithilfe des aktualisierten Master Bilds eine neue VM für Sie erstellt.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-179">When users log off and then log on again, a new VM is created for them by using the updated Master Image.</span></span> <span data-ttu-id="b1b5b-180">Alle Benutzereinstellungen werden beibehalten und auf den neuen virtuellen Computer angewendet.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-180">All their user settings will be retained and applied to the new VM.</span></span> <span data-ttu-id="b1b5b-181">Dann haben Sie Zugriff auf die aktualisierten Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-181">Then they have access to the updated applications.</span></span>

**<span data-ttu-id="b1b5b-182">So konfigurieren Sie den Client für die Paketaktualisierung in einem statischen VM-Szenario</span><span class="sxs-lookup"><span data-stu-id="b1b5b-182">To configure the client for package upgrade in a Static VM scenario</span></span>**

1.  <span data-ttu-id="b1b5b-183">Führen Sie das Upgrade und Testen des Anwendungspakets durch.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-183">Complete the upgrade and testing of the application package.</span></span>

2.  <span data-ttu-id="b1b5b-184">Aktualisieren Sie das Paket auf dem App-V-Server.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-184">Upgrade the package on the App-V server.</span></span> <span data-ttu-id="b1b5b-185">Veröffentlichen und Streamen Sie dann die neue Version der Anwendungen auf dem Bereitstellungscomputer an den Client, damit die Anwendungen vollständig in den Cache geladen werden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-185">Then, publish and stream the new version of the applications to the client on the staging computer so that the applications are fully loaded into cache.</span></span>

3.  <span data-ttu-id="b1b5b-186">Starten Sie den Bereitstellungscomputer im abgesicherten Modus neu, um sicherzustellen, dass die Treiber nicht gestartet werden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-186">Restart the staging computer in Safe Mode to ensure that the drivers are not started.</span></span>

    <span data-ttu-id="b1b5b-187">**Hinweis**  Alternativ können Sie den Application Virtualization Service im Services. msc beenden und deaktivieren und dann den Computer neu starten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-187">**Note** Alternatively, you can stop and disable the Application Virtualization service in the Services.msc, and then restart the computer.</span></span> <span data-ttu-id="b1b5b-188">Nachdem die Datei kopiert wurde, denken Sie daran, den Dienst erneut zu aktivieren und zu starten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-188">After the file has been copied, remember to enable and start the service again.</span></span>

     

4.  <span data-ttu-id="b1b5b-189">Kopieren Sie die sftfs. FSD-Cachedatei in das San des VDI-Servers, in dem alle VMs darauf zugreifen können, beispielsweise in einem freigegebenen Ordner.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-189">Copy the Sftfs.fsd cache file to the VDI server’s SAN where all the VMs can access it, such as in a shared folder.</span></span> <span data-ttu-id="b1b5b-190">Sie können einen anderen Dateinamen verwenden, beispielsweise SFTFS \ _V2. FSD, um die neue Version zu unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-190">You can use a different filename, for example, SFTFS\_V2.FSD, to distinguish the new version.</span></span>

5.  <span data-ttu-id="b1b5b-191">Zum Konfigurieren des App-V-Desktop Clients auf dem VDI-Master-VM-Bild, um die aktualisierte freigegebene Cachedatei zu verwenden, ändern Sie den FileName-Wert des AppFS-Registrierungsschlüssels so, dass er auf den Speicherort der aktualisierten Datei verweist, beispielsweise \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-191">To configure the App-V Desktop Client on the VDI Master VM Image to use the updated shared cache file, change the AppFS registry key FILENAME value to point to the location of the updated file, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="b1b5b-192">Dadurch wird sichergestellt, dass neue Benutzer die neue Version erhalten.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-192">This ensures that new users get the new version.</span></span>

6.  <span data-ttu-id="b1b5b-193">Erstellen Sie ein Skript, das den FileName-Wert des AppFS-Schlüssels bearbeitet, um es auf den Speicherort des aktualisierten Caches festzulegen, beispielsweise \\\\VDIServername\\Sharefolder\\SFTFS\ _V2. FSD.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-193">Create a script that edits the AppFS key FILENAME value to set it to the location of the updated cache, for example, \\\\VDIServername\\Sharefolder\\SFTFS\_V2.FSD.</span></span> <span data-ttu-id="b1b5b-194">Konfigurieren Sie dieses Skript so, dass es ausgeführt wird, wenn sich der Benutzer abmeldet oder sich anmeldet, damit es vor dem Start der App-V-Clienttreiber ausgeführt wird, beispielsweise mithilfe von Gruppenrichtlinieneinstellungen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-194">Configure this script to run when the user logs off or logs on so that it runs before the App-V client drivers start, for example, by using Group Policy settings.</span></span> <span data-ttu-id="b1b5b-195">Wenn Benutzer sich abmelden und sich erneut anmelden, wird die vorhandene VM aktualisiert, und Sie verwenden die aktualisierte Kopie des Caches.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-195">When users log off and log on again, their existing VM is updated, and they will use the updated copy of the cache.</span></span> <span data-ttu-id="b1b5b-196">Dann haben Sie Zugriff auf die aktualisierten Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-196">Then, they have access to the updated applications.</span></span>

## <span data-ttu-id="b1b5b-197">Verwenden symbolischer Links beim Aktualisieren des Caches</span><span class="sxs-lookup"><span data-stu-id="b1b5b-197">How to Use Symbolic Links when Upgrading the Cache</span></span>


<span data-ttu-id="b1b5b-198">Anstatt den AppFS-Schlüsseldatei Namen jedes Mal zu ändern, wenn eine neue Cachedatei bereitgestellt wird, die neue oder aktualisierte Pakete enthält, können Sie in den folgenden Betriebssystemen einen symbolischen Link verwenden: Windows Vista, Windows 7 und Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-198">Instead of modifying the AppFS key FILENAME value every time that a new cache file is deployed that contains new or upgraded packages, you can use a symbolic link in the following operating systems: Windows Vista, Windows 7, and Windows Server 2008.</span></span> <span data-ttu-id="b1b5b-199">Weitere Informationen zu symbolischen Links finden Sie unter [symbolische Links](https://go.microsoft.com/fwlink/?LinkId=157626) ( https://go.microsoft.com/fwlink/?LinkId=157626) .</span><span class="sxs-lookup"><span data-stu-id="b1b5b-199">For more information about symbolic links, see [Symbolic Links](https://go.microsoft.com/fwlink/?LinkId=157626) (https://go.microsoft.com/fwlink/?LinkId=157626).</span></span> <span data-ttu-id="b1b5b-200">Im Gegensatz dazu unterstützt Windows XP nicht die Verwendung symbolischer Links, und Sie müssen stattdessen Abzweigungspunkte verwenden.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-200">In contrast, Windows XP does not support the use of symbolic links, and you must use junction points instead.</span></span> <span data-ttu-id="b1b5b-201">Weitere Informationen zu Junctions finden Sie im [Artikel 205524](https://go.microsoft.com/fwlink/?LinkId=182553) in der Microsoft Knowledge Base ( https://go.microsoft.com/fwlink/?LinkId=182553) und auch in der Tool [Verzweigung v 1.05](https://go.microsoft.com/fwlink/?LinkId=182554) ( https://go.microsoft.com/fwlink/?LinkId=182554) .</span><span class="sxs-lookup"><span data-stu-id="b1b5b-201">For more information about junctions, see [article 205524](https://go.microsoft.com/fwlink/?LinkId=182553) in the Microsoft Knowledge Base (https://go.microsoft.com/fwlink/?LinkId=182553), and also the tool [Junction v1.05](https://go.microsoft.com/fwlink/?LinkId=182554) (https://go.microsoft.com/fwlink/?LinkId=182554).</span></span>

**<span data-ttu-id="b1b5b-202">So konfigurieren Sie einen symbolischen Link, um auf den Cache zu verweisen</span><span class="sxs-lookup"><span data-stu-id="b1b5b-202">To configure a symbolic link to reference the cache</span></span>**

1.  <span data-ttu-id="b1b5b-203">Öffnen Sie während der anfänglichen Bereitstellungsphase ein Eingabeaufforderungsfenster als lokaler Administrator auf dem VDI-Server-Betriebssystem.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-203">During the initial deployment stage, open a Command Prompt window as a local administrator on the VDI server host operating system.</span></span>

2.  <span data-ttu-id="b1b5b-204">Erstellen Sie einen symbolischen Link mit dem Befehl mklink, und konfigurieren Sie ihn so, dass er auf die Datei sftfs. FSD verweist.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-204">Create a symbolic link by using the MKLINK command, and then configure it to point to the Sftfs.fsd file.</span></span>

    **     <span data-ttu-id="b1b5b-205">mklink symlinkname \\\\vdihostserver\\sharefolder\\sftfs.FSD</span><span class="sxs-lookup"><span data-stu-id="b1b5b-205">mklink symlinkname \\\\vdihostserver\\sharefolder\\sftfs.fsd</span></span>**

3.  <span data-ttu-id="b1b5b-206">Öffnen Sie auf dem VDI-Master-VM-Bild ein Eingabeaufforderungsfenster, indem Sie die Option " **als Administrator ausführen** " verwenden und Remote Link Berechtigungen erteilen, damit der VM auf den symbolischen Link auf dem VDI-Host Betriebssystem zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-206">On the VDI Master VM Image, open a Command Prompt window by using the **Run as administrator** option and grant remote link permissions so that the VM can access the symbolic link on the VDI Host operating system.</span></span> <span data-ttu-id="b1b5b-207">Standardmäßig sind Remote Link-Berechtigungen deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-207">By default, remote link permissions are disabled.</span></span>

    **<span data-ttu-id="b1b5b-208">fsutil-Verhaltens Satz SymlinkEvaluation R2R: 1</span><span class="sxs-lookup"><span data-stu-id="b1b5b-208">fsutil behavior set SymlinkEvaluation R2R:1</span></span>**

    <span data-ttu-id="b1b5b-209">**Hinweis**  Auf dem Speicherserver müssen entsprechende Link Berechtigungen aktiviert sein.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-209">**Note** On the storage server, appropriate link permissions must be enabled.</span></span> <span data-ttu-id="b1b5b-210">Je nach Speicherort des Links und der Datei "sftfs. FSD" sind die Berechtigungen **L2L: 1** oder **L2R: 1** oder **R2L: 1** oder **R2R: 1**.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-210">Depending on the location of link and the Sftfs.fsd file, the permissions are **L2L:1** or **L2R:1** or **R2L:1** or **R2R:1**.</span></span>

     

4.  <span data-ttu-id="b1b5b-211">Wenn Sie den App-V-Desktop Client auf dem VDI-Master-VM-Bild konfigurieren, legen Sie den AppFS-Schlüssel FileName-Wert gleich dem UNC-Pfad der FSD-Datei fest, die den symbolischen Link verwendet. setzen Sie Sie beispielsweise auf \\\\VDIHostserver\\Symlinkname.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-211">When you configure the App-V Desktop Client on the VDI Master VM Image, set the AppFS key FILENAME value equal to the UNC path of the FSD file that is using the symbolic link; for example, set it to \\\\VDIHostserver\\Symlinkname.</span></span> <span data-ttu-id="b1b5b-212">Wenn der App-V-Client zuerst auf den Cache zugreift, übergibt der symbolische Link an den Client ein Handle für die Cachedatei.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-212">When the App-V client first accesses the cache, the symbolic link passes to the client a handle to the cache file.</span></span> <span data-ttu-id="b1b5b-213">Der Client verwendet dieses Handle weiterhin, solange der Client ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-213">The client continues to use that handle as long as the client is running.</span></span> <span data-ttu-id="b1b5b-214">Der Wert des symbolischen Links kann auch dann sicher aktualisiert werden, wenn vorhandene Clients den alten freigegebenen Cache geöffnet haben.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-214">The value of the symbolic link can safely be updated even if existing clients have the old shared cache open.</span></span>

5.  <span data-ttu-id="b1b5b-215">Wenn Sie ein Paket aktualisieren oder dem Cache ein neues Paket hinzufügen müssen, führen Sie die Schritte 1 bis 5 des Aktualisierungsverfahrens für das Szenario "statische VM" oder "gepoolte VM" aus.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-215">When you must upgrade a package or to add a new package to the cache, follow steps 1 through 5 of the upgrade procedure for either the Static VM or Pooled VM scenario.</span></span> <span data-ttu-id="b1b5b-216">Löschen Sie dann den symbolischen Link, und erstellen Sie ihn erneut, um auf die neue Version der freigegebenen Cachedatei zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-216">Then, delete the symbolic link and re-create it to point to the new version of the shared cache file.</span></span> <span data-ttu-id="b1b5b-217">Wenn der VM neu gestartet wird, erhält der Client ein Handle für die aktualisierte Kopie des Caches, da der VM den Pfad verwendet, der den aktualisierten symbolischen Link enthält.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-217">When the VM is restarted, the client receives a handle to the updated copy of the cache because the VM uses the path that contains the updated symbolic link.</span></span> <span data-ttu-id="b1b5b-218">Dann können die Benutzer auf die neuen und aktualisierten Anwendungen zugreifen.</span><span class="sxs-lookup"><span data-stu-id="b1b5b-218">Then, the users have access to the new and updated applications.</span></span>

## <span data-ttu-id="b1b5b-219">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="b1b5b-219">Related topics</span></span>


[<span data-ttu-id="b1b5b-220">So installieren Sie Application Virtualization Management Server</span><span class="sxs-lookup"><span data-stu-id="b1b5b-220">How to Install Application Virtualization Management Server</span></span>](how-to-install-application-virtualization-management-server.md)

[<span data-ttu-id="b1b5b-221">So installieren Sie Application Virtualization Client manuell</span><span class="sxs-lookup"><span data-stu-id="b1b5b-221">How to Manually Install the Application Virtualization Client</span></span>](how-to-manually-install-the-application-virtualization-client.md)

[<span data-ttu-id="b1b5b-222">So installieren Sie den Client über die Befehlszeile</span><span class="sxs-lookup"><span data-stu-id="b1b5b-222">How to Install the Client by Using the Command Line</span></span>](how-to-install-the-client-by-using-the-command-line-new.md)

 

 





